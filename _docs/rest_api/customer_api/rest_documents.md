---
title: Документы
permalink: rest_documents.html
sidebar: evorest
product: REST API
---

В разделе приведены методы для получения *документов*, которые смарт-терминал создаёт в процессе работы.

## Получить список документов

    GET /stores/{store-id}/documents

### Параметры запроса

Имя  | Тип  | Описание
-----|------|--------------
`since`  | `long` | Дата начала выборки. Ответ содержит документы, созданные в указанную дату и после неё. Не указывайте параметр, если требуется получить документы начиная с момента создания магазина.
`until`  | `long` | Дата окончания выборки. Ответ содержит документы, созданные до указанной даты. Если дата окончания выборки не указана, Облако Эвотор передаёт в параметр дату выполнения запроса.
`type`  | `string` | Фильтр, который определяет типы документов в ответе. Если фильтр не указан, поиск производится по всем типам документов. Разрешается указывать несколько типов через запятую. [Возможные значения параметра](./rest_documents.html#typeparameter).
`cursor`| `string` | Идентификатор курсора для постраничного чтения данных. Указывайте параметр для получения второй и последующих страниц данных. Для корректной работы постраничной навигации, параметр должен принимать значение переменной `next_cursor`, которое присутствует в предыдущем ответе Облака Эвотор.

{% include note.html content="Параметры `since`, `until` и `type` требуется указывать только в первом запросе в серии постраничных запросов." %}

### Ответ

```
200 Success
```

```json
{
  "items": [
    {
      "type": "OPEN_SESSION",
      "id": "20170222-D58C-40E0-8051-B53ADFF38860",
      "extras": {},
      "number": 1234,
      "close_date": "2017-01-10T09:33:19.757+0000",
      "time_zone_offset": 10800000,
      "session_id": "1022722e-9441-4beb-beae-c6bc5e7af30d",
      "session_number": 80,
      "close_user_id": "20170417-46B8-40B9-802E-4DEB67C07565",
      "device_id": "20170928-9441-4BEB-BEAE-C6BC5E7AF30D",
      "store_id": "20170928-3176-40EB-80E2-A11F032E282A",
      "user_id": "09-012345678901234",
      "version": "V2"
    }
  ],
  "paging": {
    "next_cursor": "string"
  }
}
```

## Получить документ по идентификатору

    GET /stores/{store-id}/documents/{document-id}

### Ответ

```
200 Success
```

```json
{
  "type": "OPEN_SESSION",
  "id": "20170222-D58C-40E0-8051-B53ADFF38860",
  "extras": {},
  "number": 1234,
  "close_date": "2017-01-10T09:33:19.757+0000",
  "time_zone_offset": 10800000,
  "session_id": "1022722e-9441-4beb-beae-c6bc5e7af30d",
  "session_number": 80,
  "close_user_id": "20170417-46B8-40B9-802E-4DEB67C07565",
  "device_id": "20170928-9441-4BEB-BEAE-C6BC5E7AF30D",
  "store_id": "20170928-3176-40EB-80E2-A11F032E282A",
  "user_id": "09-012345678901234",
  "version": "V2",
  "body": {}
}
```

## Получить список документов по идентификатору смарт-терминала

    GET /stores/{store-id}/devices/{device-id}/documents

### Параметры запроса

Имя  | Тип  | Описание
-----|------|--------------
`since`  | `long` | Дата начала выборки. Ответ содержит документы, созданные в указанную дату и после неё. Не указывайте параметр, если требуется получить документы начиная с момента создания магазина.
`until`  | `long` | Дата окончания выборки. Ответ содержит документы, созданные до указанной даты. Если дата окончания выборки не указана, Облако Эвотор передаёт в параметр дату выполнения запроса.
`type`  | `string` | Фильтр, который определяет типы документов в ответе. Если фильтр не указан, поиск производится по всем типам документов. Вы можете указывать несколько типов через запятую. [Возможные значения параметра](./rest_documents.html#typeparameter).
`cursor`| `string` | Идентификатор курсора для постраничного чтения данных. Указывайте параметр для получения второй и последующих страниц данных. Для корректной работы постраничной навигации, параметр должен принимать значение переменной `next_cursor`, которое присутствует в предыдущем ответе Облака Эвотор.

{% include note.html content="Параметры `since`, `until` и `type` требуется указывать только в первом запросе в серии постраничных запросов." %}

### Ответ

```
200 Success
```

```json
{
  "items": [
    {
      "type": "OPEN_SESSION",
      "id": "20170222-D58C-40E0-8051-B53ADFF38860",
      "extras": {},
      "number": 1234,
      "close_date": "2017-01-10T09:33:19.757+0000",
      "time_zone_offset": 10800000,
      "session_id": "1022722e-9441-4beb-beae-c6bc5e7af30d",
      "session_number": 80,
      "close_user_id": "20170417-46B8-40B9-802E-4DEB67C07565",
      "device_id": "20170928-9441-4BEB-BEAE-C6BC5E7AF30D",
      "store_id": "20170928-3176-40EB-80E2-A11F032E282A",
      "user_id": "09-012345678901234",
      "version": "V2"
    }
  ],
  "paging": {
    "next_cursor": "string"
  }
}
```

## Значения параметра `type` {#typeparameter}

Возможные значения параметра `type`:

* `OPEN_SESSION` – [открытие смены на смарт-терминале](./rest_open_session.html.html);
* `POS_OPEN_SESSION` – [открытие смены в ККТ](./rest_pos_open_session.html);
* `CLOSE_SESSION` – [закрытие смены](./rest_close_session.html);
* `CASH_INCOME` – [внесение наличных в кассу](./rest_cash_income.html);
* `CASH_OUTCOME` – [изъятие наличных из кассы](./rest_cash_outcome.html);
* `INVENTORY` – [инвентаризация](./rest_inventory.html);
* `ACCEPT` – [приемка товара](./rest_accept.html);
* `REVALUATION` – [переоценка товара](./rest_revaluation.html);
* `WRITE_OFF` – [списание товара](./rest_write_off.html);
* `RETURN` – [возврат товара поставщику](./rest_return.html);
* `OPEN_TARE` – [вскрытие тары](./rest_open_tare.html);
* `SELL` – [продажа товара](./rest_sell.html);
* `PAYBACK` – [возврат товара продавцу](./rest_payback.html);
* `BUY` – [выкуп (товара у клиента)](./rest_buy.html);
* `BUYBACK` – [обратный выкуп (товара клиентом)](./rest_buyback.html);
* `X_REPORT` – [X-отчет (без гашения)](./rest_x_report.html);
* `Z_REPORT` – [Z-отчет (с гашением)](./rest_z_report.html).

## Схема документов

Все документы можно условно разделить на две части:

* Общие поля.
* Объект `body`.

  Объект `body` содержит данные, уникальные для каждого типа документов.

### Общие поля документов

Имя  | Тип  | Описание
-----|------|--------------
`type`  | `string` | [Тип документа](./rest_documents.html#typeparameter).
`id`  | `string` | Идентификатор документа. Уникален в рамках магазина.
`extras`  | `object` | Объект, который содержит дополнительную информацию. Дополнительную информацию могут добавлять сторонние приложения. Приложению возвращаются только его собственные дополнительные поля.
`number`| `number` | Порядковый номер документа на смарт-терминале. Отсчёт ведётся с момента активации смарт-терминала. При выполнении программного сброса отсчёт начинается с единицы.
`close_date`| `string` | Дата на смарт-терминале в момент сохранения документа. Представляется в формате ISO 8601 и приводится к TZ +0000.
`time_zone_offset`| `number` | Содержит настройки часового пояса на смарт-терминале в момент сохранения документа. Смещение для даты сохранения документа на смарт-терминале в миллисекундах относительно UTC.
`session_id`| `string` | Уникальный идентификатор смены. Смарт-терминал присваивает идентификатор в момент открытия смены документом `OPEN_SESSION`. Все документы в рамках одной смены имеют одинаковый идентификатор смены.
`session_number`| `string` | Порядковый номер смены на смарт-терминале. Отсчёт ведётся с момента активации смарт-терминала. При выполнении программного сброса отсчёт начинается с единицы.
`close_user_id`| `string` | Уникальный идентификатор сотрудника под учётными данными которого был создан документ.
`device_id`| `string` | Уникальный идентификатор смарт-терминала, на котором был сформирован документ.
`store_id`| `string` | Уникальный идентификатор магазина, в котором находился смарт-терминал, когда был сформирован документ.
`user_id`| `string` | Уникальный идентификатор пользователя Эвотор, соответствующий учетной записи владельца бизнеса, на которую активирован смарт-терминал, сформировавший документ.
`version`| `string` | Версия схемы документа.
`body`| `object` | Объект с основной информацией о документе. Его структура и наполнение зависит от типа документа.

В подразделах раздела **Документы** приводятся примеры объекта `body` в зависимости от типа документа.
